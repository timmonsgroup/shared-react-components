import { Meta, Story, Canvas } from '@storybook/addon-docs';
import Grid from './PamLayoutGrid';

<Meta 
  title="Grid/PAM Layout Grid" 
  component={Grid}
  argTypes={{
    data: {
      control: 'array'
    },
    layout: {
      control: 'object'
    },
    onFilterModelChange: {
      control: 'function'
    },
    onSortModelChange: {
      control: 'function'
    }
  }}

/>

export const Template = (args) => <Grid layout={args.layout} data={args.data} onFilterModelChange={args.onFilterModelChange} onSortModelChange={args.onSortModelChange} />

const log = [];

# Grid

export const layout = {
  "data": {
    "bulkList": "/api/joinRequest/all"
  },
  "grid": {
    "sort": {
      "field": "createdOn",
      "order": "asc"
    },
    "idColumn": "streamID"
  },
  "id": 12,
  "modelId": 30,
  "enabled": true,
  "name": "Test Layout",
  "editable": false,
  "layoutKey": "list",
  "type": 2,
  "sections": [{
    "editable": true,
    "enabled": true,
    "name": "Test Layout",
    "order": 20,
    "layout": [{
      "label": "ID",
      "path": "id",
      "type": 2,
      "model": {
        "id": 1,
        "modelid": 1,
        "type": 2,
        "name": "id"
      },
      "required": false,
      "disabled": false,
      "flex": 1
    }, {
      "label": "Name",
      "path": "name",
      "type": 0,
      "model": {
        "id": 2,
        "modelid": 1,
        "type": 0,
        "name": "name"
      },
      "required": false,
      "disabled": false,
      "flex": 1
    }, {
      "label": "Type",
      "path": "type",
      "type": 7,
      "possibleChoices": [
        {
          "id": 1,
          "name": "Type1"
        },
        {
          "id": 2,
          "name": "Type2"
        }
      ],
      "model": {
        "id": 3,
        "modelid": 1,
        "type": 7,
        "name": "type"
      },
      "required": false,
      "disabled": false,
      "flex": 2
    }, {
      "label": "Status",
      "path": "status",
      "type": 7,
      "possibleChoices": [
        {
          "id": 1,
          "name": "Active"
        },
        {
          "id": 2,
          "name": "Inactive"
        }
      ],
      "model": {
        "id": 3,
        "modelid": 1,
        "type": 7,
        "name": "type"
      },
      "required": false,
      "disabled": false,
      "hidden": false,
      "flex": 2
    }]
  }]
};

export const nullDataLayout = { ...layout, data: { ...layout.data, nullValue: "Empty" }, name: "Null Value" }

export const nullDataColumnLayout = { ...layout, data: { ...layout.data, nullValue: "Empty" }, name: "Null Value", "sections": [{
    "editable": true,
    "enabled": true,
    "name": "Test Layout",
    "order": 20,
    "layout": [{
      "label": "ID",
      "path": "id",
      "type": 2,
      "model": {
        "id": 1,
        "modelid": 1,
        "type": 2,
        "name": "id"
      },
      "required": false,
      "disabled": false,
      "flex": 1
    }, {
      "label": "Name",
      "path": "name",
      "type": 0,
      "model": {
        "id": 2,
        "modelid": 1,
        "type": 0,
        "name": "name"
      },
      "required": false,
      "disabled": false,
      "flex": 1
    }, {
      "label": "Type",
      "path": "type",
      "type": 7,
      "possibleChoices": [
        {
          "id": 1,
          "name": "Type1"
        },
        {
          "id": 2,
          "name": "Type2"
        }
      ],
      "model": {
        "id": 3,
        "modelid": 1,
        "type": 7,
        "name": "type"
      },
      "required": false,
      "disabled": false,
      "flex": 2
    }, {
      "label": "Status",
      "path": "status",
      "nullValue":"No Value",
      "type": 7,
      "possibleChoices": [
        {
          "id": 1,
          "name": "Active"
        },
        {
          "id": 2,
          "name": "Inactive"
        }
      ],
      "model": {
        "id": 3,
        "modelid": 1,
        "type": 7,
        "name": "type"
      },
      "required": false,
      "disabled": false,
      "hidden": false,
      "flex": 2
    }]
  }] }


export const data = [
  {
    id: '1',
    name: 'Name 1',
    type: { id: 1, name: 'Type1' },
    status: { id: 1, name: 'Status1' },
    initiatedOn: '2021-01-01',
    initiatedBy: { id: 1, name: 'Initiated By 1' },
    lastUpdatedOn: '2021-01-01',
    lastUpdatedBy: { id: 1, name: 'Last Updated By 1' },
    activeOn: '2021-01-01',
    sampleLink: { label: 'Sample Link', url: 'https://www.google.com' },
  },
  {
    id: '2',
    name: 'Name 2',
    type: { id: 1, name: 'Type1' },
    status: { id: 2, name: 'Status2' },
    sampleLink: 'https://www.google.com',
  },
  {
    id: '3',
    name: 'Name 3',
    type: null,
    status: { id: 3, name: 'Status3' },
  },
  {
    id: '4',
    name: 'Name 4',
    sampleLink: { label: 'Sample Link', link: 'doop' },
  },
  {
    id: '5',
    name: 'Name 5',
    type: { id: 2, name: 'Type2' },
    status: { id: 1, name: 'Status1' },
  },
  {
    id: '6',
    name: 'Name 6',
    type: { id: 1, name: 'Type1' },
    status: { id: 2, name: 'Status2' },
    sampleLink: { label: 'Sample Link', url: 'https://www.google.com' },
  },
  {
    id: '7',
    name: 'Name 7',
    type: { id: 2, name: 'Type2' },
    status: { id: 3, name: 'Status3' },
  },
  {
    id: '8',
    name: 'Name 8',
    type: { id: 2, name: 'Type2' },
    sampleLink: { label: 'Sample Link', link: 'doop' },
  },
  {
    id: '9',
    name: 'Name 9',
    type: { id: 2, name: 'Type2' },
    status: { id: 1, name: 'Status1' },
  },
  {
    id: '10',
    name: 'Name 10',
    type: { id: 1, name: 'Type1' },
    status: { id: 2, name: 'Status2' },
    sampleLink: { label: 'Sample Link', url: 'https://www.google.com' },
  },
  {
    id: '11',
    name: 'Name 11',
    type: { id: 1, name: 'Type1' },
    status: { id: 3, name: 'Status3' },
  },
  {
    id: '12',
    name: 'Name 12',
    sampleLink: { label: 'Sample Link', link: 'doop' },
  },
  {
    id: '13',
    name: 'Name 13',
    type: { id: 1, name: 'Type1' },
    status: { id: 1, name: 'Status1' },
  },
  {
    id: '14',
    name: 'Name 14',
    type: { id: 2, name: 'Type2' },
    status: { id: 2, name: 'Status2' },
    sampleLink: { label: 'Sample Link', url: 'https://www.google.com' },
  },
  {
    id: '15',
    name: 'Name 15',
    type: { id: 1, name: 'Type1' },
    status: { id: 3, name: 'Status3' },
  },
  {
    id: '16',
    name: 'Name 16',
    type: { id: 1, name: 'Type1' },
    sampleLink: { label: 'Sample Link', link: 'doop' },
  },
  {
    id: '17',
    name: 'Name 17',
    status: { id: 1, name: 'Status1' },
  },
  {
    id: '18',
    name: 'Name 18',
    type: { id: 1, name: 'Type1' },
    status: { id: 2, name: 'Status2' },
    sampleLink: { label: 'Sample Link', url: 'https://www.google.com' },
  },
  {
    id: '19',
    name: 'Name 19',
    type: { id: 2, name: 'Type2' },
    status: { id: 3, name: 'Status3' },
  },
  {
    id: '20',
    name: 'Name 20',
    type: { id: 2, name: 'Type2' },
    sampleLink: { label: 'Sample Link', link: 'doop' },
  }
];


A `PamLayoutGrid` component takes a [PamLayout](/?path=/dataStructures/pamLayout) and a `data` as props. The `PamLayout` is used to define the columns and the `data` is used to populate the rows.




## No Data

When there is no data the columns will still be rendered but the data will say no rows. This can show wehn you have a data source that has no results.

<Canvas>
  <Story name="No Data"
    args={{
      layout: layout, 
      data: [],
    }}>
    {Template.bind({})}
  </Story>
</Canvas>

## With Data

When there is data the data will be rendered

<Canvas>
  <Story name="With Data"
    args={{
      layout: layout, 
      data: data,
    }}>
    {Template.bind({})}
  </Story>
</Canvas>


## Grid null value override

If you wish to override the default value of 'N/A' for null values you can set the nullValue property in data to what you want to display instead. For example we provide "Empty" for nullValue below.

<Canvas>
  <Story name="Null Value Override"
    args={{
      layout: nullDataLayout, 
      data: data,
    }}>
    {Template.bind({})}
  </Story>
</Canvas>


## Grid null value override on a column

Additionally the nullValue can be set on the column level.

<Canvas>
  <Story name="Column Null Value Override"
    args={{
      layout: nullDataColumnLayout, 
      data: data,
    }}>
    {Template.bind({})}
  </Story>
</Canvas>


## Filter Model Change returns source field as well

Change a filter and then check out the console. Note that the filter values now have a "field" property pointing back to the source field!

<Canvas>
  <Story name="On Filter Model Change"
    args={{
      layout: nullDataColumnLayout, 
      data: data,
      onFilterModelChange: ((model)=>{ console.log("Filter Model Change story!", model) })
    }}>
    {Template.bind({})}
  </Story>
</Canvas>


## Sort Model Change returns source field as well

Change a sort and then check out the console. Note that the sort values now have a "field" property pointing back to the source field!

<Canvas>
  <Story name="On Sort Model Change"
    args={{
      layout: nullDataColumnLayout, 
      data: data,
      onSortModelChange: ((model)=>{ console.log("Sort Model Change story!", model) })
    }}>
    {Template.bind({})}
  </Story>
</Canvas>